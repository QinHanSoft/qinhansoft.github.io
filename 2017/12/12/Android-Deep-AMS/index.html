<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>深入理解Android卷II笔记-ActivityManagerService | 长桥の情书</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">深入理解Android卷II笔记-ActivityManagerService</h1><a id="logo" href="/.">长桥の情书</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">深入理解Android卷II笔记-ActivityManagerService</h1><div class="post-meta">Dec 12, 2017</div><a data-disqus-identifier="2017/12/12/Android-Deep-AMS/" href="/2017/12/12/Android-Deep-AMS/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>ActivityManagerService（以下简称AMS）是Android中最核心的服务，主要负责系统中四大组件的启动、切换、调度及应用进程的管理和调用等工作，其职责与操作系统中的进程管理和调度模块相似，因此在Android中非常重要。</p>
<p>为了更好的理解AMS，下面将以五条不同的线来分析它。</p>
<ul>
<li>第一条线：分析SystemServer中AMS的调用轨迹；</li>
<li>第二条线：以am命令启动一个Activity为例，分析应用进程的创建、Activity的启动，以及它们和AMS之间的交互等知识；</li>
<li>第三条线和第四条线：分别以Broadcast和Service为例，分析AMS中Broadcast和Service的相关处理流程；</li>
<li>第五条线：以一个Crash的应用进程为出发点，分析AMS如何打理该应用进程的身后事。</li>
</ul>
<p>除了这五条线外，还将统一分析在这五条线中频繁出现的AMS中应用进程的调度、内存管理等相关的知识。</p>
<p>先来看一下AMS的家族图谱，如下图所示：<img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1s%0D%0AbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI3OTEiIGhlaWdo%0D%0AdD0iMjY4Ij48ZGVmcy8+PGc+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgx%0D%0ALDEpIj48cmVjdCBmaWxsPSIjQzBDMEMwIiBzdHJva2U9Im5vbmUiIHg9IjI1NSIgeT0iMzEiIHdp%0D%0AZHRoPSIxMTIiIGhlaWdodD0iNDQiIG9wYWNpdHk9IjAuMiIvPjwvZz48ZyB0cmFuc2Zvcm09InRy%0D%0AYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0i%0D%0Abm9uZSIgeD0iMjQ4IiB5PSIyNCIgd2lkdGg9IjExMiIgaGVpZ2h0PSI0NCIvPjwvZz48ZyB0cmFu%0D%0Ac2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0%0D%0Acm9rZT0iIzAwMDAwMCIgZD0iTSAyNDggMjQgTCAzNjAgMjQgTCAzNjAgNjggTCAyNDggNjggTCAy%0D%0ANDggMjQgWiBaIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFu%0D%0Ac2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAw%0D%0AMDAiIGQ9Ik0gMjQ4IDQ5IEwgMzYwIDQ5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcg%0D%0AdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25l%0D%0AIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMjQ4IDU5IEwgMzYwIDU5IiBzdHJva2UtbWl0ZXJsaW1p%0D%0AdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48%0D%0AZz48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBz%0D%0AdHJva2U9Im5vbmUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxM3B4IiBmb250LXN0%0D%0AeWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJib2xkIiB0ZXh0LWRlY29yYXRpb249Im5vbmUiIHg9%0D%0AIjI4NS41IiB5PSI0My41Ij5CaW5kZXI8L3RleHQ+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5z%0D%0AbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNDMEMwQzAiIHN0cm9rZT0ibm9u%0D%0AZSIgeD0iMjQ3IiB5PSIxMjciIHdpZHRoPSIyMjQiIGhlaWdodD0iNTciIG9wYWNpdHk9IjAuMiIv%0D%0APjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZp%0D%0AbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgeD0iMjQwIiB5PSIxMjAiIHdpZHRoPSIyMjQiIGhl%0D%0AaWdodD0iNTciLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEp%0D%0AIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMjQwIDEyMCBMIDQ2NCAx%0D%0AMjAgTCA0NjQgMTc3IEwgMjQwIDE3NyBMIDI0MCAxMjAgWiBaIiBzdHJva2UtbWl0ZXJsaW1pdD0i%0D%0AMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0%0D%0AaCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMjQwIDE0NSBMIDQ2NCAxNDUiIHN0%0D%0Acm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQp%0D%0AIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAyNDAg%0D%0AMTU1IEwgNDY0IDE1NSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PC9nPjxnIHRyYW5zZm9ybT0i%0D%0AdHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PGc+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tl%0D%0APSJub25lIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIiBmb250LWZhbWlseT0i%0D%0AQXJpYWwiIGZvbnQtc2l6ZT0iMTNweCIgZm9udC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdodD0i%0D%0AYm9sZCIgdGV4dC1kZWNvcmF0aW9uPSJub25lIiB4PSIyODYuNSIgeT0iMTM5LjUiPkFjdGl2aXR5%0D%0ATWFuYWdlck5hdGl2ZTwvdGV4dD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0x%0D%0ANCkgc2NhbGUoMSwxKSI+PGc+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIi8+PHRleHQg%0D%0AZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6%0D%0AZT0iMTNweCIgZm9udC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdodD0ibm9ybWFsIiB0ZXh0LWRl%0D%0AY29yYXRpb249Im5vbmUiIHg9IjI0NSIgeT0iMTcyLjUiPitnZXREZWZhdWx0KCk8L3RleHQ+PC9n%0D%0APjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZp%0D%0AbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAzMTkgMTIwIEwgMzE5IDY4IiBzdHJva2Ut%0D%0AbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2Fs%0D%0AZSgxLDEpIj48cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9Im5vbmUiIGQ9Ik0gMzI3LjQxOTAz%0D%0ANTUxMjAzMiA4OC4zMjUzNDk3MTUyNDgzMSBMIDMxOSA2OCBMIDMxMC41ODA5NjQ0ODc5NjggODgu%0D%0AMzI1MzQ5NzE1MjQ4MzEiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2Fs%0D%0AZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMzI3LjQxOTAz%0D%0ANTUxMjAzMiA4OC4zMjUzNDk3MTUyNDgzMSBMIDMxOSA2OCBMIDMxMC41ODA5NjQ0ODc5NjggODgu%0D%0AMzI1MzQ5NzE1MjQ4MzEgTCAzMjcuNDE5MDM1NTEyMDMyIDg4LjMyNTM0OTcxNTI0ODMxIiBzdHJv%0D%0Aa2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBz%0D%0AY2FsZSgxLDEpIj48cmVjdCBmaWxsPSIjQzBDMEMwIiBzdHJva2U9Im5vbmUiIHg9IjQzMSIgeT0i%0D%0AMzEiIHdpZHRoPSIxMTIiIGhlaWdodD0iNDgiIG9wYWNpdHk9IjAuMiIvPjwvZz48ZyB0cmFuc2Zv%0D%0Acm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0%0D%0Acm9rZT0ibm9uZSIgeD0iNDI0IiB5PSIyNCIgd2lkdGg9IjExMiIgaGVpZ2h0PSI0OCIvPjwvZz48%0D%0AZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5v%0D%0AbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSA0MjQgMjQgTCA1MzYgMjQgTCA1MzYgNzIgTCA0MjQg%0D%0ANzIgTCA0MjQgMjQgWiBaIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3Jt%0D%0APSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48Zz48cGF0aCBmaWxsPSJub25lIiBzdHJv%0D%0Aa2U9Im5vbmUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIGZvbnQtZmFtaWx5%0D%0APSJBcmlhbCIgZm9udC1zaXplPSIxM3B4IiBmb250LXN0eWxlPSJpdGFsaWMiIGZvbnQtd2VpZ2h0%0D%0APSJib2xkIiB0ZXh0LWRlY29yYXRpb249Im5vbmUiIHg9IjQzMSIgeT0iNDMuNSI+SUFjdGl2aXR5%0D%0ATWFuYWdlcjwvdGV4dD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2Nh%0D%0AbGUoMSwxKSI+PHJlY3QgZmlsbD0iI0MwQzBDMCIgc3Ryb2tlPSJub25lIiB4PSI0OTUiIHk9IjEy%0D%0ANyIgd2lkdGg9IjE0NCIgaGVpZ2h0PSI0NCIgb3BhY2l0eT0iMC4yIi8+PC9nPjxnIHRyYW5zZm9y%0D%0AbT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PHJlY3QgZmlsbD0iI2ZmZmZmZiIgc3Ry%0D%0Ab2tlPSJub25lIiB4PSI0ODgiIHk9IjEyMCIgd2lkdGg9IjE0NCIgaGVpZ2h0PSI0NCIvPjwvZz48%0D%0AZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5v%0D%0AbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSA0ODggMTIwIEwgNjMyIDEyMCBMIDYzMiAxNjQgTCA0%0D%0AODggMTY0IEwgNDg4IDEyMCBaIFoiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFu%0D%0Ac2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0%0D%0Acm9rZT0iIzAwMDAwMCIgZD0iTSA0ODggMTQ1IEwgNjMyIDE0NSIgc3Ryb2tlLW1pdGVybGltaXQ9%0D%0AIjEwIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PHBh%0D%0AdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBkPSJNIDQ4OCAxNTUgTCA2MzIgMTU1IiBz%0D%0AdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0%0D%0AKSBzY2FsZSgxLDEpIj48Zz48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48dGV4dCBm%0D%0AaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXpl%0D%0APSIxM3B4IiBmb250LXN0eWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJib2xkIiB0ZXh0LWRlY29y%0D%0AYXRpb249Im5vbmUiIHg9IjQ5NiIgeT0iMTM5LjUiPkFjdGl2aXR5TWFuYWdlclByb3h5PC90ZXh0%0D%0APjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0%0D%0AaCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gNTg0IDEyMCBMIDU4NCA0OCBMIDUz%0D%0ANiA0OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIzIi8+PC9nPjxn%0D%0AIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PHBhdGggZmlsbD0iI0ZG%0D%0ARkZGRiIgc3Ryb2tlPSJub25lIiBkPSJNIDU1Ni4zMjUzNDk3MTUyNDgzIDM5LjU4MDk2NDQ4Nzk2%0D%0AODAyNSBMIDUzNiA0OCBMIDU1Ni4zMjUzNDk3MTUyNDgzIDU2LjQxOTAzNTUxMjAzMTk3NSIvPjwv%0D%0AZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9%0D%0AIm5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSA1NTYuMzI1MzQ5NzE1MjQ4MyAzOS41ODA5NjQ0%0D%0AODc5NjgwMjUgTCA1MzYgNDggTCA1NTYuMzI1MzQ5NzE1MjQ4MyA1Ni40MTkwMzU1MTIwMzE5NzUg%0D%0ATCA1NTYuMzI1MzQ5NzE1MjQ4MyAzOS41ODA5NjQ0ODc5NjgwMjUiIHN0cm9rZS1taXRlcmxpbWl0%0D%0APSIxMCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxy%0D%0AZWN0IGZpbGw9IiNDMEMwQzAiIHN0cm9rZT0ibm9uZSIgeD0iMjc5IiB5PSIyMzEiIHdpZHRoPSIx%0D%0ANTQiIGhlaWdodD0iNDQiIG9wYWNpdHk9IjAuMiIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0%0D%0AZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIg%0D%0AeD0iMjcyIiB5PSIyMjQiIHdpZHRoPSIxNTQiIGhlaWdodD0iNDQiLz48L2c+PGcgdHJhbnNmb3Jt%0D%0APSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9%0D%0AIiMwMDAwMDAiIGQ9Ik0gMjcyIDIyNCBMIDQyNiAyMjQgTCA0MjYgMjY4IEwgMjcyIDI2OCBMIDI3%0D%0AMiAyMjQgWiBaIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFu%0D%0Ac2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAw%0D%0AMDAiIGQ9Ik0gMjcyIDI0OSBMIDQyNiAyNDkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48%0D%0AZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5v%0D%0AbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAyNzIgMjU5IEwgNDI2IDI1OSIgc3Ryb2tlLW1pdGVy%0D%0AbGltaXQ9IjEwIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwx%0D%0AKSI+PGc+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIi8+PHRleHQgZmlsbD0iIzAwMDAw%0D%0AMCIgc3Ryb2tlPSJub25lIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTNweCIgZm9u%0D%0AdC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1kZWNvcmF0aW9uPSJub25l%0D%0AIiB4PSIyODAiIHk9IjI0My41Ij5BY3Rpdml0eU1hbmFnZXJTZXJ2aWNlPC90ZXh0PjwvZz48L2c+%0D%0APGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJu%0D%0Ab25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMzUwIDIyMyBMIDM1MSAxNzgiIHN0cm9rZS1taXRl%0D%0AcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEs%0D%0AMSkiPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0ibm9uZSIgZD0iTSAzNTguOTY1Mzk0NTUy%0D%0ANTc4NzQgMTk4LjUwNzM3NjQ2ODUyMzQzIEwgMzUxIDE3OCBMIDM0Mi4xMzE0Nzk1Mzc3MTY1IDE5%0D%0AOC4xMzMyODk0NjgxOTMxNyIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNj%0D%0AYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAzNTguOTY1%0D%0AMzk0NTUyNTc4NzQgMTk4LjUwNzM3NjQ2ODUyMzQzIEwgMzUxIDE3OCBMIDM0Mi4xMzE0Nzk1Mzc3%0D%0AMTY1IDE5OC4xMzMyODk0NjgxOTMxNyBMIDM1OC45NjUzOTQ1NTI1Nzg3NCAxOTguNTA3Mzc2NDY4%0D%0ANTIzNDMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0%0D%0AZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNDMEMwQzAiIHN0cm9rZT0ibm9uZSIg%0D%0AeD0iNyIgeT0iMTY3IiB3aWR0aD0iMjExIiBoZWlnaHQ9IjQ4IiBvcGFjaXR5PSIwLjIiLz48L2c+%0D%0APGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cmVjdCBmaWxsPSIj%0D%0AZmZmZmZmIiBzdHJva2U9Im5vbmUiIHg9IjAiIHk9IjE2MCIgd2lkdGg9IjIxMSIgaGVpZ2h0PSI0%0D%0AOCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRo%0D%0AIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAwIDE2MCBMIDIxMSAxNjAgTCAyMTEg%0D%0AMjA4IEwgMCAyMDggTCAwIDE2MCBaIFoiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0%0D%0AcmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxnPjxwYXRoIGZpbGw9Im5v%0D%0AbmUiIHN0cm9rZT0ibm9uZSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSIgZm9u%0D%0AdC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEzcHgiIGZvbnQtc3R5bGU9Iml0YWxpYyIgZm9u%0D%0AdC13ZWlnaHQ9ImJvbGQiIHRleHQtZGVjb3JhdGlvbj0ibm9uZSIgeD0iOC41IiB5PSIxNzkuNSI+%0D%0AQmF0dGVyeVN0YXRzSW1wbC5CYXR0ZXJ5Q2FsbGJhY2s8L3RleHQ+PC9nPjwvZz48ZyB0cmFuc2Zv%0D%0Acm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9r%0D%0AZT0iIzAwMDAwMCIgZD0iTSAyNzEgMjQ3IEwgMjQwIDI0OCBMIDI0MCAxODQgTCAyMTIgMTg0IiBz%0D%0AdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IjMiLz48L2c+PGcgdHJhbnNm%0D%0Ab3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSIjRkZGRkZGIiBz%0D%0AdHJva2U9Im5vbmUiIGQ9Ik0gMjMyLjMyNTM0OTcxNTI0ODMgMTc1LjU4MDk2NDQ4Nzk2ODAzIEwg%0D%0AMjEyIDE4NCBMIDIzMi4zMjUzNDk3MTUyNDgzIDE5Mi40MTkwMzU1MTIwMzE5NyIvPjwvZz48ZyB0%0D%0AcmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUi%0D%0AIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAyMzIuMzI1MzQ5NzE1MjQ4MyAxNzUuNTgwOTY0NDg3OTY4%0D%0AMDMgTCAyMTIgMTg0IEwgMjMyLjMyNTM0OTcxNTI0ODMgMTkyLjQxOTAzNTUxMjAzMTk3IEwgMjMy%0D%0ALjMyNTM0OTcxNTI0ODMgMTc1LjU4MDk2NDQ4Nzk2ODAzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAi%0D%0ALz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cmVjdCBm%0D%0AaWxsPSIjQzBDMEMwIiBzdHJva2U9Im5vbmUiIHg9IjU1IiB5PSIyMzEiIHdpZHRoPSIxMjMiIGhl%0D%0AaWdodD0iNDgiIG9wYWNpdHk9IjAuMiIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwt%0D%0AMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgeD0iNDgi%0D%0AIHk9IjIyNCIgd2lkdGg9IjEyMyIgaGVpZ2h0PSI0OCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5z%0D%0AbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAw%0D%0AMCIgZD0iTSA0OCAyMjQgTCAxNzEgMjI0IEwgMTcxIDI3MiBMIDQ4IDI3MiBMIDQ4IDIyNCBaIFoi%0D%0AIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwt%0D%0AMTQpIHNjYWxlKDEsMSkiPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIvPjx0ZXh0%0D%0AIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNp%0D%0AemU9IjEzcHgiIGZvbnQtc3R5bGU9Iml0YWxpYyIgZm9udC13ZWlnaHQ9ImJvbGQiIHRleHQtZGVj%0D%0Ab3JhdGlvbj0ibm9uZSIgeD0iNTciIHk9IjI0My41Ij5XYXRjaGRvZy5Nb25pdG9yPC90ZXh0Pjwv%0D%0AZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBm%0D%0AaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0gMjcxIDI0NyBMIDE3MiAyNDciIHN0cm9r%0D%0AZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMyIvPjwvZz48ZyB0cmFuc2Zvcm09%0D%0AInRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9r%0D%0AZT0ibm9uZSIgZD0iTSAxOTIuMzI1MzQ5NzE1MjQ4MyAyMzguNTgwOTY0NDg3OTY4MDMgTCAxNzIg%0D%0AMjQ3IEwgMTkyLjMyNTM0OTcxNTI0ODMgMjU1LjQxOTAzNTUxMjAzMTk3Ii8+PC9nPjxnIHRyYW5z%0D%0AZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PHBhdGggZmlsbD0ibm9uZSIgc3Ry%0D%0Ab2tlPSIjMDAwMDAwIiBkPSJNIDE5Mi4zMjUzNDk3MTUyNDgzIDIzOC41ODA5NjQ0ODc5NjgwMyBM%0D%0AIDE3MiAyNDcgTCAxOTIuMzI1MzQ5NzE1MjQ4MyAyNTUuNDE5MDM1NTEyMDMxOTcgTCAxOTIuMzI1%0D%0AMzQ5NzE1MjQ4MyAyMzguNTgwOTY0NDg3OTY4MDMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwv%0D%0AZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9%0D%0AIm5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSAzNjggMTIwIEwgMzY4IDEwNCBMIDQ4MCAxMDQg%0D%0ATCA0ODAgNzIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMyIvPjwv%0D%0AZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9%0D%0AIiNGRkZGRkYiIHN0cm9rZT0ibm9uZSIgZD0iTSA0ODguNDE5MDM1NTEyMDMyIDkyLjMyNTM0OTcx%0D%0ANTI0ODMxIEwgNDgwIDcyIEwgNDcxLjU4MDk2NDQ4Nzk2OCA5Mi4zMjUzNDk3MTUyNDgzMSIvPjwv%0D%0AZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9%0D%0AIm5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTSA0ODguNDE5MDM1NTEyMDMyIDkyLjMyNTM0OTcx%0D%0ANTI0ODMxIEwgNDgwIDcyIEwgNDcxLjU4MDk2NDQ4Nzk2OCA5Mi4zMjUzNDk3MTUyNDgzMSBMIDQ4%0D%0AOC40MTkwMzU1MTIwMzIgOTIuMzI1MzQ5NzE1MjQ4MzEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIv%0D%0APjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZp%0D%0AbGw9IiNDMEMwQzAiIHN0cm9rZT0ibm9uZSIgeD0iNDk1IiB5PSIxODMiIHdpZHRoPSIyODMiIGhl%0D%0AaWdodD0iOTYiIG9wYWNpdHk9IjAuMiIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwt%0D%0AMTQpIHNjYWxlKDEsMSkiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgeD0iNDg4%0D%0AIiB5PSIxNzYiIHdpZHRoPSIyODMiIGhlaWdodD0iOTYiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFu%0D%0Ac2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAw%0D%0AMDAiIGQ9Ik0gNDg4IDE3NiBMIDc3MSAxNzYgTCA3NzEgMjcyIEwgNDg4IDI3MiBMIDQ4OCAxNzYg%0D%0AWiBaIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUo%0D%0AMTAsLTE0KSBzY2FsZSgxLDEpIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9%0D%0AIk0gNDg4IDIwMSBMIDc3MSAyMDEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPjwvZz48ZyB0cmFu%0D%0Ac2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEsMSkiPjxwYXRoIGZpbGw9Im5vbmUiIHN0%0D%0Acm9rZT0iIzAwMDAwMCIgZD0iTSA0ODggMjExIEwgNzcxIDIxMSIgc3Ryb2tlLW1pdGVybGltaXQ9%0D%0AIjEwIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PGc+%0D%0APHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgc3Ry%0D%0Ab2tlPSJub25lIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTNweCIgZm9udC1zdHls%0D%0AZT0ibm9ybWFsIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1kZWNvcmF0aW9uPSJub25lIiB4PSI1%0D%0AODIuNSIgeT0iMTk1LjUiPkFjdGl2aXR5TWFuYWdlcjwvdGV4dD48L2c+PC9nPjxnIHRyYW5zZm9y%0D%0AbT0idHJhbnNsYXRlKDEwLC0xNCkgc2NhbGUoMSwxKSI+PGc+PHBhdGggZmlsbD0ibm9uZSIgc3Ry%0D%0Ab2tlPSJub25lIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIiBmb250LWZhbWls%0D%0AeT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTNweCIgZm9udC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdo%0D%0AdD0ibm9ybWFsIiB0ZXh0LWRlY29yYXRpb249Im5vbmUiIHg9IjQ5MyIgeT0iMjI4LjUiPivlhoXp%0D%0Ag6josIPnlKhBY3Rpdml0eU1hbmFnZXJOYXRpdmUuZ2V0RGVmYXVsdCgpPC90ZXh0PjwvZz48L2c+%0D%0APGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsLTE0KSBzY2FsZSgxLDEpIj48Zz48cGF0aCBmaWxs%0D%0APSJub25lIiBzdHJva2U9Im5vbmUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUi%0D%0AIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxM3B4IiBmb250LXN0eWxlPSJub3JtYWwi%0D%0AIGZvbnQtd2VpZ2h0PSJub3JtYWwiIHRleHQtZGVjb3JhdGlvbj0ibm9uZSIgeD0iNDkzIiB5PSIy%0D%0ANDMuNSI+K+W+l+WIsOS4gOS4qkFjdGl2aXR5TWFuYWdlclByb3h55a+56LGh77yM5LuO6ICM5LiO%0D%0AKCk8L3RleHQ+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCwtMTQpIHNjYWxlKDEs%0D%0AMSkiPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIvPjx0ZXh0IGZpbGw9IiMwMDAw%0D%0AMDAiIHN0cm9rZT0ibm9uZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEzcHgiIGZv%0D%0AbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1kZWNvcmF0aW9uPSJu%0D%0Ab25lIiB4PSI0OTMiIHk9IjI1OC41Ij4rQU1T5Lqk5LqSKCk8L3RleHQ+PC9nPjwvZz48L2c+PC9z%0D%0Admc+" alt=""></p>
<p>由上图可知：</p>
<ul>
<li>AMS由ActivityManagerNative（以下简称AMN）类派生，并实现Watchdog.Monitor和BatteryStatsImpl.BatteryCallback接口。而AMN由Binder派生，实现了IActivityManager接口；</li>
<li>客户端使用ActivityManager类，由于AMS是系统核心服务，很多API不能开放供客户端使用，所以设计者没有让ActivityManager直接加入AMS家族。在ActivityManager类内部通过AMN的getDefault()函数得到一个ActivityManagerProxy对象，通过它可以与AMS通信；</li>
</ul>
<h3 id="1-初识ActivityManagerService"><a href="#1-初识ActivityManagerService" class="headerlink" title="1. 初识ActivityManagerService"></a>1. 初识ActivityManagerService</h3><p>AMS由SystemServer的ServerThread线程创建，提取它的调用轨迹，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.调用main函数，得到一个Context对象</span></div><div class="line">context = ActivityManagerService.main(factoryTest);</div><div class="line"></div><div class="line"><span class="comment">// 2.setSystemProcess：这样SystemServer进程可加到AMS中，并被它管理</span></div><div class="line">ActivityManagerService.setSystemProcess();</div><div class="line"></div><div class="line"><span class="comment">// 3.installSystemProviders：将SettingsProvider放到SystemServer进程中来运行</span></div><div class="line">AcvtivityManagerService.installSystemProviders();</div><div class="line"></div><div class="line"><span class="comment">// 4.在内部保存WindowManagerService（后面简称WMS）</span></div><div class="line">ActivityManagerService.self().setWindowManager(wm);</div><div class="line"></div><div class="line"><span class="comment">// 5.和</span></div></pre></td></tr></table></figure>
<style type="text/css">
    p {
        text-indent: 2em; /*首行缩进*/
    }
</style></div><div class="tags"></div><div class="post-nav"><a href="/2017/12/13/Java基础/" class="pre"></a><a href="/2017/12/04/Android-Senior-Plug-In/" class="next">Android高级进阶笔记-Android插件框架机制</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = '长桥の情书';
var disqus_identifier = '2017/12/12/Android-Deep-AMS/';
var disqus_title = '深入理解Android卷II笔记-ActivityManagerService';
var disqus_url = 'http://yoursite.com/2017/12/12/Android-Deep-AMS/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//长桥の情书.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/21/Day01-breaking/">第一天</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/14/Android-intent-bug/">Android 使用Intent传递参数时的一个bug</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/26/rx-Operate-Create-Start/">Start</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/29/Build-a-Responseive-UI-with-ConstraintLayout/">Build a Responseive UI with ConstraintLayout</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/17/html5-fkjava-char2/">疯狂HTML 5+CSS 3+JavaScript讲义笔记——2.HTML 5的常用元素与属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/rx-Operate-Create-Error/">Error</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/rx-Operate-Create-Empty/">Empty、Never、Throw</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/rx-Operate-Create-Timer/">Timer</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/rx-Operate-Create-Interval/">Interval</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/rx-Operate-Create-Range/">Range</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//长桥の情书.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">长桥の情书.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>